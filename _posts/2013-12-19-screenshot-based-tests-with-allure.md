---
layout: post
title: Результаты сравнения скриншотов
category: qa, tools, automation, webdriver
---

Недавно на хабре был [большой пост](http://habrahabr.ru/company/yandex/blog/200968/) от [Лёни](https://twitter.com/LeonSabr) про сравнение скриншотов в тестировании поиска Яндекса. Я тоже уже писал про [сравнение скриншотов](http://artkoshelev.github.io/posts/screenshots/) и считаю что этот метод незаслуженно обделяют вниманием.

Важным вопросом в этом подходе является представление результата. Скриншотов, как правило, много, и если отчёт будет неудобным, ты потеряешь в итоге всё выигранное время на его разбор. Если ты еще не в курсе, мы выложили в open-source [фреймворк Allure](https://github.com/allure-framework). Его использование сразу даёт наем следующее:

* упавшие тесты отделены от успешных и вообще всё няшно
* для каждого теста есть сценарий, по которому можно понять, как воспроизвести нужное состояние

Для полного счастья не хватает только самих скриншотов и найденной разницы. Для этого генерируем в конце теста простую html-ку, в которой будут три наших картинки и прикрепляем эту html-ку в случае падения теста:

{% highlight java %}
@Attach(name = "Найденные различия", type = AttachmentType.HTML)
public static File saveResult(File html) {
    return html;
}
{% endhighlight %}

Четыре(!) строчки кода. Я еще расскажу про Allure и его применение в будущем, а на сегодня хватит =). 

Кстати, это последний пост в этом году, с понедельника я в отпуске и в ближайший месяц писать не буду. Всех с наступающим, увидимся в 2014-м!