---
layout: post
title: Ложечка дёгтя в hamcrest-java
category: automation, hamcrest, java, hack
image: 
  feature: 2015-04-14.png
  credit: Froda
---

Сегодня короткий пост про грязный хак. Допустим у тебя есть объект-обёртка над коллекцией объектов, которую тебе нужно проверить. Такое обычно случается, когда тестируешь API и работаешь с авто-сгенерированными классами ([например, при помощи jaxb](http://artkoshelev.github.io/posts/jaxb-part-2/)). Тогда у тебя получаются [примерно такие матчеры](https://gist.github.com/artkoshelev/1425e8f55cf583464529). Печаль в том, что последняя строчка этого кода не компилируется из-за особенностей реализации матчеров для коллекций в hamcrest. Я потратил несколько часов на поиск нормального решения, но в итоге закостылил вот так:

{% highlight java %}
assertThat(userContainer, hasUserList((Matcher)hasSize(1)));
{% endhighlight %}

Надеюсь, это недоразумение мы скоро исправим :).