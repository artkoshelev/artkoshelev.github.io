---
layout: post
title: Цвет бедра испуганной нимфы
category: qa, test automation
---

В этих наших интернетах распространено мнение, что сравнение скриншотов не работает. Оно слишком шумит, оно зависит от данных и т.д. Вот что я думаю по этому поводу: каждой задаче - свой инструмент. И есть задачи, для которых сравнение скриншотов - самый эффективный (а иногда и единственный) способ решения. Приведу несколько примеров из своего опыта:

  *  Наша платформа документации (help.yandex.ru, api.yandex.ru). Много контента и он статический. Вёрстка меняется редко.
  * Просмотрщик документов в почте. При клике на кнопку "просмотреть" на стороне сервера генерится картинка, которая отдаются юзеру. Никаких функциональных тестов тут не напишешь - кроме картинки никаких элементов на странице нет.
  * "Колдунщики" поиска. Специальные поисковые сниппеты, которые появляются по определённым запросам ([например](http://yandex.ru/yandsearch?text=%D1%86%D0%B2%D0%B5%D1%82%20%D0%B1%D0%B5%D0%B4%D1%80%D0%B0%20%D0%B8%D1%81%D0%BF%D1%83%D0%B3%D0%B0%D0%BD%D0%BD%D0%BE%D0%B9%20%D0%BD%D0%B8%D0%BC%D1%84%D1%8B&amp;lr=2)). Понятно что остальная выдача на странице может и будет меняться. Поэтому сравниваются не полностью страницы, а только та часть, которую проверяем.

В первых двух примерах, мы срастили инструмент снятия и сравнения скриншотов (если 40 строчек кода можно назвать инструментом) с краулером (взяли open-source тул crawler4j). Однажды написанный тест работает и работает и работает. Кода - минимум, профита - максимум. Вот это - эффективная автоматизация. Вы всё еще думаете что сравнение скриншотов не работает? ;)